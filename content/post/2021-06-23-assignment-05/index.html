---
title: assignment 05
author: Xiao Ji
date: '2021-06-23'
slug: assignment-05
categories: []
tags: []
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<pre class="r"><code>library(GGally)</code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<pre class="r"><code>library(tidymodels)</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;tune&#39;:
##   method                   from   
##   required_pkgs.model_spec parsnip</code></pre>
<pre><code>## -- Attaching packages -------------------------------------- tidymodels 0.1.3 --</code></pre>
<pre><code>## v broom        0.7.6      v rsample      0.1.0 
## v dials        0.0.9      v tibble       3.1.1 
## v dplyr        1.0.6      v tidyr        1.1.3 
## v infer        0.5.4      v tune         0.1.5 
## v modeldata    0.1.0      v workflows    0.2.2 
## v parsnip      0.1.6      v workflowsets 0.0.2 
## v purrr        0.3.4      v yardstick    0.0.8 
## v recipes      0.1.16</code></pre>
<pre><code>## -- Conflicts ----------------------------------------- tidymodels_conflicts() --
## x purrr::discard() masks scales::discard()
## x dplyr::filter()  masks stats::filter()
## x dplyr::lag()     masks stats::lag()
## x recipes::step()  masks stats::step()
## * Use tidymodels_prefer() to resolve common conflicts.</code></pre>
<div id="load-data" class="section level2">
<h2>Load Data</h2>
<pre class="r"><code>data(&quot;diamonds&quot;)
glimpse(diamonds)</code></pre>
<pre><code>## Rows: 53,940
## Columns: 10
## $ carat   &lt;dbl&gt; 0.23, 0.21, 0.23, 0.29, 0.31, 0.24, 0.24, 0.26, 0.22, 0.23, 0.~
## $ cut     &lt;ord&gt; Ideal, Premium, Good, Premium, Good, Very Good, Very Good, Ver~
## $ color   &lt;ord&gt; E, E, E, I, J, J, I, H, E, H, J, J, F, J, E, E, I, J, J, J, I,~
## $ clarity &lt;ord&gt; SI2, SI1, VS1, VS2, SI2, VVS2, VVS1, SI1, VS2, VS1, SI1, VS1, ~
## $ depth   &lt;dbl&gt; 61.5, 59.8, 56.9, 62.4, 63.3, 62.8, 62.3, 61.9, 65.1, 59.4, 64~
## $ table   &lt;dbl&gt; 55, 61, 65, 58, 58, 57, 57, 55, 61, 61, 55, 56, 61, 54, 62, 58~
## $ price   &lt;int&gt; 326, 326, 327, 334, 335, 336, 336, 337, 337, 338, 339, 340, 34~
## $ x       &lt;dbl&gt; 3.95, 3.89, 4.05, 4.20, 4.34, 3.94, 3.95, 4.07, 3.87, 4.00, 4.~
## $ y       &lt;dbl&gt; 3.98, 3.84, 4.07, 4.23, 4.35, 3.96, 3.98, 4.11, 3.78, 4.05, 4.~
## $ z       &lt;dbl&gt; 2.43, 2.31, 2.31, 2.63, 2.75, 2.48, 2.47, 2.53, 2.49, 2.39, 2.~</code></pre>
<ul>
<li>Notes: using log scale for price</li>
</ul>
</div>
<div id="create-two-histograms-of-the-price-variable-and-place-them-side-by-side-on-one-output-image." class="section level2">
<h2>Create two histograms of the price variable and place them side by side on one output image.</h2>
</div>
<div id="the-first-plot-should-be-a-histogram-of-price-and-the-second-plot-should-transform-the-price-variable-using-log10." class="section level2">
<h2>The first plot should be a histogram of price and the second plot should transform the price variable using log10.</h2>
<pre class="r"><code>library(gridExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;gridExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<pre class="r"><code>p1 &lt;- ggplot(diamonds,(aes(x = price)))+
  geom_histogram(binwidth = 100, fill = I(&#39;#099DD9&#39;))+
  ggtitle(&#39;Diamond prices&#39;)

p2 = ggplot(diamonds,(aes(x = log10(price))))+
  geom_histogram(binwidth = 0.05, fill = I(&#39;#F79420&#39;))+
  ggtitle(&#39;log Price&#39;)

grid.arrange(p1,p2,ncol = 2)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" />
## Create Correlation Matrix among variables.</p>
<pre class="r"><code>diamonds %&gt;%
    mutate_if(is.factor,as.numeric) %&gt;%
   select(price,everything()) %&gt;%
    ggcorr(method = c(&quot;everything&quot;, &quot;pearson&quot;),label = T)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>From the matrix above, we found there are some highly-related variables.</p>
<p>Thus, we could predict that there may be non-linear relationship between carat with price from the chart below.</p>
<pre class="r"><code>diamonds %&gt;%
ggplot(aes(x=carat,y=price))+
  scale_y_continuous(trans=log_trans(),labels=function(x) round(x,-2))+
  geom_point()+
  geom_smooth(method=&quot;lm&quot;,formula=&quot;y~poly(x,4)&quot;)+
  theme_bw()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
